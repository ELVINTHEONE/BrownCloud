{% extends "layout.html" %}

{% block body %}
<div>
    <div style="display:block">
        <div class="searched_tracks" style="float: left; width: 50%;">
            <h3>Search for tracks</h3>
            <div id="track_filters">
                <input type="text" id="track_search" placeholder="Search for tracks"/>
                <input type="text" id="track_tags" placeholder="Tags"/>
                <div class="track_visibility">
                    <h4>Track Visibility</h4>
                    <input type="radio" id="track_visibility_all" name="all" value="all" checked="checked"><label for="track_visibility_all">All Tracks</label>
                    <input type="radio" id="track_visibility_public" name="public" value="public"><label for="track_visibility_public">Public Tracks</label>
                    <input type="radio" id="track_visibility_private" name="private" value="private"><label for="track_visibility_private">Private Tracks</label>
                </div>
                <div class="track_license">
                    <h4><a href="https://en.wikipedia.org/wiki/Creative_Commons_license#Types_of_licenses" target="_blank"> Track License</a></h4>
                    <input type="radio" id="track_no_rights_reserved" name="no_rights_reserved" value="no_rights_reserved" checked="checked"><label for="track_no_rights_reserved">No Rights Reserved</label>
                    <input type="radio" id="track_all_rights_reserved" name="all_rights_reserved" value="all_rights_reserved"><label for="track_all_rights_reserved">All Rights Reserved</label>
                    <input type="radio" id="track_cc_by" name="cc_by" value="cc_by"><label for="track_cc_by">Creative Commons License (BY)</label>
                    <input type="radio" id="track_cc_by_nc" name="cc_by_nc" value="cc_by_nc"><label for="track_cc_by_nc">Creative Commons License (BY-NC)</label>
                    <input type="radio" id="track_cc_by_nd" name="cc_by_nd" value="cc_by_nd"><label for="track_cc_by_nd">Creative Commons License (BY-ND)</label>
                    <input type="radio" id="track_cc_by_sa" name="cc_by_sa" value="cc_by_sa"><label for="track_cc_by_sa">Creative Commons License (BY-SA)</label>
                    <input type="radio" id="track_cc_by_nc_nd" name="cc_by_nc_nd" value="cc_by_nc_nd"><label for="track_cc_by_nc_nd">Creative Commons License (NC-ND)</label>
                    <input type="radio" id="track_cc_by_nc_sa" name="cc_by_nc_sa" value="cc_by_nc_sa"><label for="track_cc_by_nc_sa">Creative Commons License (BY-NC-SA)</label>
                </div>
                <input type="text" id="track_genres" placeholder="Genre(s)"/>
                <input type="text" id="track_bpm_from" placeholder="Minimum BPM"/>
                <input type="text" id="track_bpm_to" placeholder="Maximum BPM"/>
                <input type="text" id="track_duration_from" placeholder="Minimum Duration"/>
                <input type="text" id="track_duration_to" placeholder="Maximum Duration"/>
                <input type="date" id="track_created_at_from" placeholder="Minimum Creation Date"/>
                <input type="date" id="track_created_at_to" placeholder="Maximum Creation Date"/>
                <div class="track_type">
                    <h4>Track Type</h4>
                    <input type="radio" id="track_type_original" name="original" value="original"><label for="track_type_original">Original</label>
                    <input type="radio" id="track_type_remix" name="remix" value="remix"><label for="track_type_remix">Remix</label>
                    <input type="radio" id="track_type_live" name="live" value="live"><label for="track_type_live">Live</label>
                    <input type="radio" id="track_type_recording" name="recording" value="recording"><label for="track_type_recording">Recording</label>
                    <input type="radio" id="track_type_spoken" name="spoken" value="spoken"><label for="track_type_spoken">Spoken</label>
                    <input type="radio" id="track_type_podcast" name="podcast" value="podcast"><label for="track_type_podcast">Podcast</label>
                    <input type="radio" id="track_type_demo" name="demo" value="demo"><label for="track_type_demo">Demo</label>
                    <input type="radio" id="track_type_in_progress" name="in_progress" value="in_progress"><label for="track_type_in_progress">In Progress</label>
                    <input type="radio" id="track_type_stem" name="stem" value="stem"><label for="track_type_stem">Stem</label>
                    <input type="radio" id="track_type_loop" name="loop" value="loop"><label for="track_type_loop">Loop</label>
                    <input type="radio" id="track_type_sound_effect" name="sound_effect" value="sound_effect"><label for="track_type_sound_effect">Sound Effect</label>
                    <input type="radio" id="track_type_sample" name="sample" value="sample"><label for="track_type_sample">Sample</label>
                    <input type="radio" id="track_type_other" name="other" value="other"><label for="track_type_other">Other</label>
                </div>
            </div>
            <ul id="fetched_tracks" style="list-style-position: inside"></ul>
        </div>
        <div class="searched_playlists" style="float: right; width:50%">
            <h3>Search for playlists</h3>
            <div id="playlist_filters">
                <input type="text" id="playlist_search" placeholder="Search for tracks"/>
                <input type="text" id="playlist_tags" placeholder="Tags"/>
                <div class="track_visibility">
                    <h4>Track Visibility</h4>
                    <input type="radio" id="playlist_visibility_all" name="all" value="all" checked="checked"><label for="playlist_visibility_all">All Tracks</label>
                    <input type="radio" id="playlist_visibility_public" name="public" value="public"><label for="playlist_visibility_public">Public Tracks</label>
                    <input type="radio" id="playlist_visibility_private" name="private" value="private"><label for="playlist_visibility_private">Private Tracks</label>
                </div>
                <div class="track_license">
                    <h4><a href="https://en.wikipedia.org/wiki/Creative_Commons_license#Types_of_licenses" target="_blank"> Track License</a></h4>
                    <input type="radio" id="playlist_no_rights_reserved" name="no_rights_reserved" value="no_rights_reserved" checked="checked"><label for="playlist_no_rights_reserved">No Rights Reserved</label>
                    <input type="radio" id="playlist_all_rights_reserved" name="all_rights_reserved" value="all_rights_reserved"><label for="playlist_all_rights_reserved">All Rights Reserved</label>
                    <input type="radio" id="playlist_cc_by" name="cc_by" value="cc_by"><label for="playlist_cc_by">Creative Commons License (BY)</label>
                    <input type="radio" id="playlist_cc_by_nc" name="cc_by_nc" value="cc_by_nc"><label for="playlist_cc_by_nc">Creative Commons License (BY-NC)</label>
                    <input type="radio" id="playlist_cc_by_nd" name="cc_by_nd" value="cc_by_nd"><label for="playlist_cc_by_nd">Creative Commons License (BY-ND)</label>
                    <input type="radio" id="playlist_cc_by_sa" name="cc_by_sa" value="cc_by_sa"><label for="playlist_cc_by_sa">Creative Commons License (BY-SA)</label>
                    <input type="radio" id="playlist_cc_by_nc_nd" name="cc_by_nc_nd" value="cc_by_nc_nd"><label for="playlist_cc_by_nc_nd">Creative Commons License (NC-ND)</label>
                    <input type="radio" id="playlist_cc_by_nc_sa" name="cc_by_nc_sa" value="cc_by_nc_sa"><label for="playlist_cc_by_nc_sa">Creative Commons License (BY-NC-SA)</label>
                </div>
                <input type="text" id="playlist_genres" placeholder="Genre(s)"/>
                <input type="text" id="playlist_bpm_from" placeholder="Minimum BPM"/>
                <input type="text" id="playlist_bpm_to" placeholder="Maximum BPM"/>
                <input type="text" id="playlist_duration_from" placeholder="Minimum Duration"/>
                <input type="text" id="playlist_duration_to" placeholder="Maximum Duration"/>
                <input type="date" id="playlist_created_at_from" placeholder="Minimum Creation Date"/>
                <input type="date" id="playlist_created_at_to" placeholder="Maximum Creation Date"/>
                <div class="track_type">
                    <h4>Track Type</h4>
                    <input type="radio" id="playlist_type_original" name="original" value="original"><label for="playlist_type_original">Original</label>
                    <input type="radio" id="playlist_type_remix" name="remix" value="remix"><label for="playlist_type_remix">Remix</label>
                    <input type="radio" id="playlist_type_live" name="live" value="live"><label for="playlist_type_live">Live</label>
                    <input type="radio" id="playlist_type_recording" name="recording" value="recording"><label for="playlist_type_recording">Recording</label>
                    <input type="radio" id="playlist_type_spoken" name="spoken" value="spoken"><label for="playlist_type_spoken">Spoken</label>
                    <input type="radio" id="playlist_type_podcast" name="podcast" value="podcast"><label for="playlist_type_podcast">Podcast</label>
                    <input type="radio" id="playlist_type_demo" name="demo" value="demo"><label for="playlist_type_demo">Demo</label>
                    <input type="radio" id="playlist_type_in_progress" name="in_progress" value="in_progress"><label for="playlist_type_in_progress">In Progress</label>
                    <input type="radio" id="playlist_type_stem" name="stem" value="stem"><label for="playlist_type_stem">Stem</label>
                    <input type="radio" id="playlist_type_loop" name="loop" value="loop"><label for="playlist_type_loop">Loop</label>
                    <input type="radio" id="playlist_type_sound_effect" name="sound_effect" value="sound_effect"><label for="playlist_type_sound_effect">Sound Effect</label>
                    <input type="radio" id="playlist_type_sample" name="sample" value="sample"><label for="playlist_type_sample">Sample</label>
                    <input type="radio" id="playlist_type_other" name="other" value="other"><label for="playlist_type_other">Other</label>
                </div>
            </div>
            <ul id="fetched_playlists"></ul>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<!-- Add jQuery -->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
<!-- Scripts for SoundCloud -->
<script src="//code.jquery.com/ui/1.11.3/jquery-ui.min.js"
		integrity="sha256-xI/qyl9vpwWFOXz7+x/9WkG5j/SVnSw21viy8fWwbeE="
		crossorigin="anonymous"></script>
<script type="text/javascript" src="//connect.soundcloud.com/sdk/sdk-3.0.0.js"></script>
<!-- App scripts -->
<script>
    // jQuery extension for a delayed keyup http://stackoverflow.com/a/6054104/747275
    (function($){
        $.widget("ui.onDelayedKeyup", {
            _init : function() {
                var self = this;
                $(this.element).keyup(function() {
                    if(typeof(window['inputTimeout']) != "undefined"){
                        window.clearTimeout(inputTimeout);
                    }
                    var handler = self.options.handler;
                    window['inputTimeout'] = window.setTimeout(function() {
                        handler.call(self.element) }, self.options.delay);
                });
            },
            options: {
                handler: $.noop(),
                delay: 500
            }
        });
    })(jQuery);
</script>
<script type="text/javascript" src="{{ url_for('static', filename='main.js') }}"></script>
<script>
		$(document).ready(function() {
			var base_uri = "http://brown-cloud.herokuapp.com/";
			$("#track_search").onDelayedKeyup({
				handler: function() {
					fetchAndAddToList(
						base_uri + 'tracks',
						$.trim($(this).val()),
						$("ul#fetched_tracks")
					)
				}
			});
			$("#playlist_search").onDelayedKeyup({
				handler: function() {
					fetchAndAddToList(
						base_uri + 'playlists',
						$.trim($(this).val()),
						$("ul#fetched_playlists")
					)
				}
			});
		});
</script>
{% endblock %}
